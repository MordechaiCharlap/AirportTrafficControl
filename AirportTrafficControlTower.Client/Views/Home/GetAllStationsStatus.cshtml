@model IEnumerable<AirportTrafficControlTower.Data.Model.StationStatus>
<link rel="stylesheet" href="~/css/stationStatus.css" asp-append-version="true" />
@{
    ViewData["Title"] = "GetAllStationsStatus";
}
<script type="text/javascript">
    $(document).ready(function(){
        setInterval(function(){
            $.ajax({
                type: 'Get',
                url: '@Url.Action("LoadStations")',
                dataType: 'json',
                contentType: "application/json;charset=utf-8",
                success: function(response) {
                    $.each(response.stationStatusList, function(index, stationStatus){
                        $(".flightInStation:eq("+index+")").html(stationStatus.flightInStation);
                        $(".stationBody i:eq("+index+")").removeClass('fa-plane-circle-xmark').
                            removeClass('fa-plane-departure').
                            removeClass('fa-fa-plane-arrival');
                        if(stationStatus.isAscending==null){
                            $(".stationBody i:eq("+index+")").addClass('fa-plane-circle-xmark');
                        }
                        else if(stationStatus.isAscending){
                            $(".stationBody i:eq("+index+")").addClass('fa-plane-departure');
                        }
                        else{
                            $(".stationBody i:eq("+index+")").addClass('fa-plane-arrival');
                        }
                    });
                },
                error: function(response) {
                    debugger;
                    alert('error');
                }
            });
        }, 1000);
    });

</script>

<p>
    <a class="btn btn-sm btn-outline-secondary" asp-action="AddFlight">Add Flight</a>
</p>
<div class="d-flex justify-content-center">
    <div class="d-flex flex-wrap justify-content-between col-lg-8 col-md-12 col-xl-8">
        @foreach (var item in Model)
        {
            var className = "bi bi-" + @item.StationNumber + "-square-fill";
            <div class="card station">
                <div class="card-header d-flex justify-content-center">
                    <i class="@className"></i>
                </div>
                <div class="card-body stationBody d-flex">
                    <p class="card-text flightInStation">None</p>
                    <i class="fa-solid fa-plane-circle-xmark"></i>
                </div>
            </div>
        }
    </div>
</div>

